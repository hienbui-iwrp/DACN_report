% !TeX root = ..\main.tex
\section{Thực thi quy trình nghiệp vụ}

\subsection{Thay đổi quy trình nghiệp vụ trong hệ thống}
\begin{figure}[!htp]
    \centering
    \includegraphics[width=10cm]{img/bpel/general.png}
    \newline
    \caption{Vị trí của BPEL trong hệ thống}
\end{figure}

Đối với mỗi quy trình nghiệp vụ của hệ thống được thiết kế bằng BPMN, các kĩ thuật viên cần thực hiện chuyền đổi các quy trình đó thành quy trình BPEL để thực thi và tích hợp vào hệ thông. \\

Khi có nhu cầu thanh đổi quy trình nghiệp vụ trong hệ thống, phía người dùng chỉ cần thực hiện thay đổi BPMN để kĩ thuật viên thực hiện chuyển đổi thành BPEL cập nhật hệ thống mà không thay đổi đến bản chất các thành phần khác trong hệ thông, ngoại trừ có thể sẽ thay đổi cách tương tác giửa các thành phần trong hệ thống đến BPEL như hình dưới đấy:

\begin{figure}[!htp]
    \centering
    \includegraphics[width=10cm]{img/bpel/tranfer.png}
    \newline
    \caption{Các thành phần bị tác động khi thay đổi quy trịnh nghiệp vụ}
\end{figure}




\subsection{Quy trình lấy danh sách sản phẩm}

\subsubsection*{Quy trình ban đầu}
\begin{figure}[!htp]
    \centering
    \includegraphics[width=12cm]{img/bpel/productDefault.jpg}
    \newline
    \caption{Quy trình lấy danh sách sản phẩm}
\end{figure}

\subsubsection*{Chuyển đổi quy trình}
Khi hệ thống được thêm event service, các sản phẩm được cập nhật lại giá bán, quy trình tính toán lại giá sản phẩm khi có event service như sau:
\begin{figure}[!htp]
    \centering
    \includegraphics[width=14cm]{img/bpel/productDefaultAfter.jpg}
    \newline
    \caption{Quy trình lấy danh sách sản phẩm sau khi thay đổi}
\end{figure}

\newpage

\subsection{Quy trình lấy thông tin chi tiết sản phẩm}
\subsubsection*{Quy trình ban đầu}
\begin{figure}[!htp]
    \centering
    \includegraphics[width=12cm]{img/bpel/productDetail.jpg}
    \newline
    \caption{Quy trình lấy thông tin chi tiết sản phẩm}
\end{figure}

\newpage
\subsubsection*{Chuyển đổi quy trình}
Khi hệ thống được thêm event service, các sản phẩm được cập nhật lại giá bán, quy trình tính toán lại giá sản phẩm khi có event service như sau:
\begin{figure}[!htp]
    \centering
    \includegraphics[width=14cm]{img/bpel/productDetailAfter.jpg}
    \newline
    \caption{Quy trình lấy thông tin chi tiết sản phẩm sau khi thay đổi}
\end{figure}

\newpage
\subsection{Quy trình tính giá giao hàng}
\subsubsection*{Quy trình ban đầu}
\begin{figure}[!htp]
    \centering
    \includegraphics[width=14cm]{img/bpel/getShipFee.jpg}
    \newline
    \caption{Quy trình tính giá giao hàng}
\end{figure}
Giá giao hàng được tính toán dựa trên vị trí giao hàng của khách hàng cộng với chi phí vận chuyển hàng giữa các kho khi đơn hàng quá lớn

\subsubsection*{Chuyển đổi quy trình}
Sau khi doanh nghiệp chịu phí chuyển hàng giửa các kho khi đơn hàng lớn, phí giao hàng chỉ được tính toán dựa trên vị trí giao hàng của khách hàng. Quy trình được thay đổi bỏ đi việc tính toán chi phí chuyển kho như sau:
\begin{figure}[!htp]
    \centering
    \includegraphics[width=12cm]{img/bpel/getShipFeeAfter.jpg}
    \newline
    \caption{Quy trình tính giá giao hàng sau khi thay đổi}
\end{figure}



\subsection{Quy trình tạo đơn hàng}
\subsubsection*{Quy trình ban đầu}
\begin{figure}[!htp]
    \centering
    \includegraphics[width=12cm]{img/bpel/createOrder.jpg}
    \newline
    \caption{Quy trình tạo đơn hàng}
\end{figure}


\subsubsection*{Chuyển đổi quy trình}
Sau khi doanh nghiệp chịu phí chuyển hàng giửa các kho khi đơn hàng lớn, việc vận chuyển hàng giửa các kho được thực hiện sau khi khách hàng chốt đơn hàng. Quy trình được thay đổi bổ xung việc chuyển kho như sau:
\begin{figure}[!htp]
    \centering
    \includegraphics[width=14cm]{img/bpel/createOrderAfter.jpg}
    \newline
    \caption{Quy trình tạo đơn hàng sau khi thay đổi}
\end{figure}